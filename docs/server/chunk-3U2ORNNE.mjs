import './polyfills.server.mjs';
import{a as F,b as V}from"./chunk-77LZ4CQU.mjs";import"./chunk-J4BDXTMW.mjs";import"./chunk-PQSTYRC2.mjs";import{H as I,k as T}from"./chunk-FQA2SOH3.mjs";import{Gb as o,Hb as x,Ib as v,Ma as b,Nb as w,Pb as y,Qa as c,Tb as E,Vb as D,Y as C,aa as g,hb as f,ka as d,la as p,nb as h,ob as S,pb as r,qb as n,rb as s,ub as k,yb as m,zb as u}from"./chunk-3ISFVPN5.mjs";import"./chunk-VVCT4QZE.mjs";var P=(a,_)=>_.product.id,$=a=>["/orders",a];function j(a,_){if(a&1){let e=k();r(0,"div",5)(1,"div",7)(2,"div"),s(3,"img",8),n()(),r(4,"div",9)(5,"div")(6,"h5"),o(7),n(),r(8,"p",10),o(9),n(),r(10,"span",11),m("click",function(){let t=d(e).$implicit,l=u();return p(l.removItem(t.product.id))}),s(11,"i",12),o(12," Remove"),n()(),r(13,"div",13)(14,"span",14),m("click",function(){let t=d(e).$implicit,l=u();return p(l.updateCart(t.product.id,t.count+1))}),s(15,"i",15),n(),r(16,"span",16),o(17),n(),r(18,"span",14),m("click",function(){let t=d(e).$implicit,l=u();return p(l.updateCart(t.product.id,t.count-1))}),s(19,"i",17),n()()()()}if(a&2){let e=_.$implicit;c(3),f("src",e.product.imageCover,b)("alt",e.product.title),c(4),x(e.product.title),c(2),v("price",e.price,""),c(8),x(e.count)}}var G=(()=>{class a{constructor(){this._CartService=C(F),this._ToastrService=C(V),this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:e=>{console.log(e.data),this.cartDetails=e.data},error:e=>{console.log(e)}})}removItem(e){this._CartService.deleteItemCart(e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data,this._CartService.cartNumber.set(i.numOfCartItems)},error:i=>{console.log(i)}})}updateCart(e,i){this._CartService.updateProductQuantity(e,i).subscribe({next:t=>{console.log(t),this.cartDetails=t.data},error:t=>{console.log(t)}})}clearCart(){this._CartService.clearCart().subscribe({next:e=>{console.log(e),e.message=="success"&&(this.cartDetails={},this._CartService.cartNumber.set(0))},error:e=>{console.log(e)}})}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=g({type:a,selectors:[["app-cart"]],standalone:!0,features:[w],decls:13,vars:7,consts:[[1,"bg-main-light","shadow","my-3","p-4","rounded-4","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"h3"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","my-2","border-bottom"],[1,"mt-2","btn-main",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"m-1","text-main"],[1,"cr",3,"click"],[1,"fa-solid","fa-trash","text-danger"],[1,"d-flex","align-items-center","gap-1"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fs-5"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(i,t){i&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),o(3,"Your Cart"),n(),r(4,"button",3),m("click",function(){return t.clearCart()}),o(5,"Clear Cart"),n()(),r(6,"p",4),o(7),E(8,"currency"),n(),h(9,j,20,5,"div",5,P),r(11,"button",6),o(12,"Check Orders"),n()()),i&2&&(c(7),v(" Total Price: ",D(8,2,t.cartDetails.totalCartPrice,"GBP"),""),c(2),S(t.cartDetails.products),c(2),f("routerLink",y(5,$,t.cartDetails._id)))},dependencies:[T,I]})}}return a})();export{G as CartComponent};
