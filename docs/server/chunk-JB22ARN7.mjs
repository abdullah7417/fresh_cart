import './polyfills.server.mjs';
import{a as q}from"./chunk-7JH3SKJE.mjs";import{c as F,d as N}from"./chunk-JBUZYEQU.mjs";import{a as T,b as p,c as I,d as B,e as x,f as v,h as G,i as A,j as M,m as D}from"./chunk-WAQ6KLHP.mjs";import"./chunk-PQSTYRC2.mjs";import{G as V}from"./chunk-FQA2SOH3.mjs";import{Gb as a,Hb as l,Nb as P,Qa as o,Tb as m,Ub as d,Y as y,aa as b,fb as h,hb as u,ka as g,la as w,lb as E,pb as n,qb as t,rb as f,ub as C,yb as _,zb as c}from"./chunk-3ISFVPN5.mjs";import"./chunk-VVCT4QZE.mjs";function R(i,S){if(i&1){let e=C();n(0,"form",2),_("ngSubmit",function(){g(e);let s=c();return w(s.verifyEmailSub())}),n(1,"div",3)(2,"label",4),a(3),m(4,"translate"),t(),f(5,"input",5),t(),n(6,"button",6),a(7),m(8,"translate"),t()()}if(i&2){let e=c();u("formGroup",e.verifyEmail),o(3),l(d(4,4,"forget.email")),o(3),u("disabled",e.verifyEmail.invalid),o(),l(d(8,6,"forget.Verify E-mail"))}}function k(i,S){if(i&1){let e=C();n(0,"form",2),_("ngSubmit",function(){g(e);let s=c();return w(s.verifyCodeSub())}),n(1,"div",3)(2,"label",7),a(3),m(4,"translate"),t(),f(5,"input",8),t(),n(6,"button",6),a(7),m(8,"translate"),t()()}if(i&2){let e=c();u("formGroup",e.verifyCode),o(3),l(d(4,4,"forget.resetCode")),o(3),u("disabled",e.verifyCode.invalid),o(),l(d(8,6,"forget.Verify Code"))}}function $(i,S){if(i&1){let e=C();n(0,"form",2),_("ngSubmit",function(){g(e);let s=c();return w(s.resetPassSub())}),n(1,"div",3)(2,"label",4),a(3),m(4,"translate"),t(),f(5,"input",9),t(),n(6,"div",3)(7,"label",10),a(8),m(9,"translate"),t(),f(10,"input",11),t(),n(11,"button",6),a(12),m(13,"translate"),t()(),a(14,"/ ")}if(i&2){let e=c();u("formGroup",e.resetPassword),o(3),l(d(4,5,"forget.email")),o(5),l(d(9,7,"forget.newPassword")),o(3),u("disabled",e.resetPassword.invalid),o(),l(d(13,9,"forget.Verify E-mail"))}}var W=(()=>{class i{constructor(){this.step=1,this._AuthService=y(q),this._Router=y(V),this.verifyEmail=new x({email:new v(null,[p.required,p.email])}),this.verifyCode=new x({resetCode:new v(null,[p.required,p.pattern(/^\w{6}$/)])}),this.resetPassword=new x({email:new v(null,[p.required,p.email]),newPassword:new v(null,[p.required,p.pattern(/^\w{6,}$/)])})}verifyEmailSub(){let e=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(e),this._AuthService.verifyEmail(this.verifyEmail.value).subscribe({next:r=>{r.statusMsg=="success"&&(this.step=2),console.log(r)},error:r=>{console.log(r)}})}verifyCodeSub(){this._AuthService.verifyCode(this.verifyCode.value).subscribe({next:e=>{e.statusMsg!="fail"&&(this.step=3),console.log(e)},error:e=>{console.log(e)}})}resetPassSub(){this._AuthService.setNewPassword(this.resetPassword.value).subscribe({next:e=>{localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"]),console.log(e)},error:e=>{console.log(e)}})}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=b({type:i,selectors:[["app-forget-password"]],standalone:!0,features:[P],decls:7,vars:4,consts:[[1,"text-center","text-main","my-2"],[1,"bg-light","p-3","rounded-4","shadow",3,"formGroup"],[1,"bg-light","p-3","rounded-4","shadow",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"btn-main",3,"disabled"],["for","resetCode"],["type","text","id","resetCode","formControlName","resetCode",1,"form-control"],["readonly","","type","email","id","email","formControlName","email",1,"form-control"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"]],template:function(r,s){r&1&&(n(0,"section")(1,"h1",0),a(2),m(3,"translate"),t(),h(4,R,9,8,"form",1)(5,k,9,8)(6,$,15,11),t()),r&2&&(o(2),l(d(3,2,"forget.Forget Password")),o(2),E(4,s.step==1?4:s.step==2?5:s.step==3?6:-1))},dependencies:[D,G,T,I,B,A,M,N,F]})}}return i})();export{W as ForgetPasswordComponent};
