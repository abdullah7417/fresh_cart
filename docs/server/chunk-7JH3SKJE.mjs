import './polyfills.server.mjs';
import{a}from"./chunk-PQSTYRC2.mjs";import{G as u,r as p}from"./chunk-FQA2SOH3.mjs";import{S as l,Y as n}from"./chunk-3ISFVPN5.mjs";var i=class extends Error{};i.prototype.name="InvalidTokenError";function h(e){return decodeURIComponent(atob(e).replace(/(.)/g,(r,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function f(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return h(r)}catch{return atob(r)}}function d(e,r){if(typeof e!="string")throw new i("Invalid token specified: must be a string");r||(r={});let t=r.header===!0?0:1,o=e.split(".")[t];if(typeof o!="string")throw new i(`Invalid token specified: missing part #${t+1}`);let c;try{c=f(o)}catch(s){throw new i(`Invalid token specified: invalid base64 for part #${t+1} (${s.message})`)}try{return JSON.parse(c)}catch(s){throw new i(`Invalid token specified: invalid json for part #${t+1} (${s.message})`)}}var k=(()=>{class e{constructor(){this._HttpClient=n(p),this._Router=n(u),this.userData=null}setRegisterForm(t){return this._HttpClient.post(`${a.BaseUrl}/api/v1/auth/signup`,t)}setLoginForm(t){return this._HttpClient.post(`${a.BaseUrl}/api/v1/auth/signin`,t)}saveUserData(){localStorage.getItem("userToken")!==null&&(this.userData=d(localStorage.getItem("userToken")))}signOut(){localStorage.removeItem("userToken"),this.userData=null,this._Router.navigate(["/login"])}verifyEmail(t){return this._HttpClient.post(`${a.BaseUrl}/api/v1/auth/forgotPasswords`,t)}verifyCode(t){return this._HttpClient.post(`${a.BaseUrl}/api/v1/auth/verifyResetCode`,t)}setNewPassword(t){return this._HttpClient.put(`${a.BaseUrl}/api/v1/auth/resetPassword`,t)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{k as a};
